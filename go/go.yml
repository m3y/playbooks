- hosts: localhost
  connection: local
  gather_facts: yes
  sudo: no

  tasks:
    - name: homebrew をアップデート
      homebrew: update_homebrew=yes

    - name: go のインストール
      homebrew: name={{ item }} state=latest
      with_items:
          - go

    - name: go 設定ファイル作成
      file:
        src: "{{ ansible_env.PWD }}/go.conf"
        dest: ~/.etc/go.conf
        state: link
        force: yes

    - name: go 設定の反映
      shell: source ~/.etc/go.conf
